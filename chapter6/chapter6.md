# chapter 6 기본적인 리팩터링

카탈로그의 첫머리는 가장 기본적이고 많이 사용해서 제일 먼저 배워야 하는 리팩터링들로 시작한다.

## 함수 추출하기 \_ Extract Function

1. 배경

   - 코드 조각을 찾아 무슨 일을 하는지 파악한 다음, 독립된 함수로 추출하고 목적에 맞는 이름을 붙인다.
   - '목적과 구현을 분리'하는 방식이 가장 합리적인 기준
     - 무슨 일을 하는지 파악하는 데 한참이 걸린다면 그 부분을 함수로 추출한 뒤 '무슨 일'에 걸맞는 이름을 짓는다.
     - 함수명을 통해 목적을 분명히 하고, 구현은 신경쓰지 않도록 할수 있다.
   - 함수가 짧으면 캐싱하기가 더 쉽기 때문에 컴파일러가 최적화하는 데 유리할 때가 많다.

   > 최적화를 할 때에는 다음 두 규칙을 따르기 바란다. 첫 번째, 하지 마라. 두 번째(전문가 한정), 아직 하지 마라 \_ M. A. 잭슨

   - 짧은 함수의 이점은 이름을 잘 지어야만 발휘되므로 이름 짓기에 특별히 신경 써야 한다.

2. 절차

   - 함수를 새로 만들고 목적을 잘 드러내는 이름을 붙인다('어떻게'가 아닌 '무엇을' 하는지가 드러나야 한다).
   - 추출할 코드를 원본 함수에서 복사하여 새 함수에 붙여넣는다.
   - 추출한 코드 중 원본 함수의 지역 변수를 참조하거나 추출한 함수의 유효범위를 벗어나는 변수는 없는지 검사한다. 있다면 매개변수로 전달한다.
   - 변수를 다 처리했다면 컴파일한다.
   - 원본 함수에서 추출한 코드 부분을 새로 만든 함수를 호출하는 문장으로 바꾼다(즉, 추출한 함수로 일을 위임한다).
   - 테스트한다.
   - 다른 코드에 방금 추출한 것과 똑같거나 비슷한 코드가 없는지 살핀다. 있다면 방금 추출한 새 함수를 호출하도록 바꿀지 검토한다.

3. 예시
   - [유효범위를 벗어나는 변수가 없을 때](ex_6_1_1.js)
   - [지역 변수를 사용할 때](ex_6_1_2.js)
