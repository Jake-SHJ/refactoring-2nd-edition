# chapter 8 기능 이동

- 요소를 다른 컨텍스트(클래스나 모듈등)로 옮기는 일 역시 리팩터링의 중요한 축이다.

## 함수 옮기기 \_ Move Function

1. 배경

   - 좋은 소프트웨어 설계의 핵심은 모듈화가 얼마나 잘 되어 있느냐를 뜻하는 모듈성(modularity)이다.
   - 모듈성이란 프로그램의 어딘가를 수정하려 할 때 해당 기능과 깊이 관련된 작은 일부만 이해해도 가능하게 해주는 능력이다.
   - 모듈성을 높이려면 서로 연관된 요소들을 함께 묶고, 요소 사이의 연결 관계를 쉽게 찾고 이해할 수 있도록 해야 한다.
   - 프로그래밍 언어들은 저마다늬 모듈화 수단을 제공하며, 각각의 수단이 함수가 살아 숨 쉬는 컨텍스트를 만들어준다.
   - 대상 함수를 호출하는 함수들은 무엇인지, 대상 함수가 호출하는 함수들은 또 무엇이 있는지, 대상 함수가 사용하는 데이터는 무엇인지를 살펴보고 컨텍스트의 위치를 결정한다.

2. 절차

   - 선택한 함수가 현재 컨텍스트에서 사용 중인 모든 프로그램 요소를 살펴본다. 이 요소들 중에도 함께 옮겨야 할 게 있는지 고민해본다.
   - 선택한 함수가 다형 메서드인지 확인한다.
   - 선택한 함수를 타깃 컨텍스트로 복사한다(이때 원래의 함수를 소스 함수라 하고 복사해서 만든 새로운 함수를 타깃 함수라 한다). 타깃 함수가 새로운 터전에 잘 자리 잡도록 다듬는다.
   - 정적 분석을 수행한다.
   - 소스 컨텍스트에서 타깃 함수를 참조할 방법을 찾아 반영한다.
   - 소스 함수를 타깃 함수의 위임 함수가 되도록 수정한다.
   - 테스트한다.
   - 소스 함수를 인라인할지 고민해본다.

3. 예시

   - [중첩 함수를 최상위로 옮기기](ex_8_1/1.js)
   - [다른 클래스로 옯기기](ex_8_1/2.js)
